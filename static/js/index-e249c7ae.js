import{al as Gt,c4 as Wt,r as $,c5 as Zt,R as De,c as v,a as K,S as Ie,as as at,bE as Jt,bF as Qt,d as ge,b as en,u as kt,bu as tn,e as H,X as nn,w as lt,ai as Ge,au as St,f as dt,av as sn,h as V,ay as rn,a9 as on,aL as Ne,aJ as Ke,Y as ut,o as ue,x as pe,m as ce,c6 as rt,c7 as an,c8 as ln,p as Ze,n as m,aj as dn,a4 as un,a6 as cn,a5 as hn,q as E,l as P,E as He,F as Ue,D as Y,K as ct,ae as fn,ag as j,N as vn,c2 as pn,k as mn,_ as gn}from"./main-8840c7eb.js";import{r as wn,c as yn}from"./requestAnimationFrameGrace-eaa77346.js";import{g as bn}from"./assets-kit-bc859cd0.js";import{u as xn}from"./use-merged-state-556311e1.js";import{u as Je,V as _n,a as kn,b as Sn}from"./Follower-a37597bf.js";import{_ as Cn}from"./Space-96a22006.js";import{b as ht}from"./route-block-7ae06361.js";import"./next-frame-once-c806eabc.js";import"./on-fonts-ready-c6e1bba8.js";import"./get-slot-58587906.js";const Mn=e=>{const t="rgba(0, 0, 0, .85)",n="0 2px 8px 0 rgba(0, 0, 0, 0.12)",{railColor:s,primaryColor:r,baseColor:i,cardColor:d,modalColor:l,popoverColor:h,borderRadius:x,fontSize:_,opacityDisabled:c}=e;return Object.assign(Object.assign({},Wt),{fontSize:_,railColor:s,railColorHover:s,fillColor:r,fillColorHover:r,opacityDisabled:c,handleColor:"#FFF",dotColor:d,dotColorModal:l,dotColorPopover:h,handleBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowHover:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowActive:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowFocus:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",indicatorColor:t,indicatorBoxShadow:n,indicatorTextColor:i,indicatorBorderRadius:x,dotBorder:`2px solid ${s}`,dotBorderActive:`2px solid ${r}`,dotBoxShadow:""})},En={name:"Slider",common:Gt,self:Mn},Dn=En;function ft(e){return window.TouchEvent&&e instanceof window.TouchEvent}function vt(){const e=$(new Map),t=n=>s=>{e.value.set(n,s)};return Zt(()=>e.value.clear()),[e,t]}const Pn=De([v("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[K("reverse",[v("slider-handles",[v("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),v("slider-dots",[v("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),K("vertical",[v("slider-handles",[v("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),v("slider-marks",[v("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),v("slider-dots",[v("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),K("vertical",`
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[v("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[v("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),v("slider-rail",`
 height: 100%;
 `,[Ie("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),K("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),v("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 `,[v("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),v("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[v("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),K("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[v("slider-handle",`
 cursor: not-allowed;
 `)]),K("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),De("&:hover",[v("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[Ie("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),v("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),K("active",[v("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[Ie("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),v("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),v("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[v("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),v("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[Ie("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),v("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[v("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[v("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[De("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),De("&:focus",[v("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[De("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),v("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[K("transition-disabled",[v("slider-dot","transition: none;")]),v("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[K("active","border: var(--n-dot-border-active);")])])]),v("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[at()]),v("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[K("top",`
 margin-bottom: 12px;
 `),K("right",`
 margin-left: 12px;
 `),K("bottom",`
 margin-top: 12px;
 `),K("left",`
 margin-right: 12px;
 `),at()]),Jt(v("slider",[v("slider-dot","background-color: var(--n-dot-color-modal);")])),Qt(v("slider",[v("slider-dot","background-color: var(--n-dot-color-popover);")]))]),$n=0,Rn=Object.assign(Object.assign({},kt.props),{to:Je.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),zn=ge({name:"Slider",props:Rn,setup(e){const{mergedClsPrefixRef:t,namespaceRef:n,inlineThemeDisabled:s}=en(e),r=kt("Slider","-slider",Pn,Dn,e,t),i=$(null),[d,l]=vt(),[h,x]=vt(),_=$(new Set),c=tn(e),{mergedDisabledRef:M}=c,f=H(()=>{const{step:o}=e;if(o<=0||o==="mark")return 0;const a=o.toString();let u=0;return a.includes(".")&&(u=a.length-a.indexOf(".")-1),u}),w=$(e.defaultValue),z=nn(e,"value"),g=xn(z,w),T=H(()=>{const{value:o}=g;return(e.range?o:[o]).map(Fe)}),ae=H(()=>T.value.length>2),le=H(()=>e.placement===void 0?e.vertical?"right":"top":e.placement),we=H(()=>{const{marks:o}=e;return o?Object.keys(o).map(parseFloat):null}),k=$(-1),ye=$(-1),W=$(-1),N=$(!1),ee=$(!1),O=H(()=>{const{vertical:o,reverse:a}=e;return o?a?"top":"bottom":a?"right":"left"}),te=H(()=>{if(ae.value)return;const o=T.value,a=_e(e.range?Math.min(...o):e.min),u=_e(e.range?Math.max(...o):o[0]),{value:p}=O;return e.vertical?{[p]:`${a}%`,height:`${u-a}%`}:{[p]:`${a}%`,width:`${u-a}%`}}),Z=H(()=>{const o=[],{marks:a}=e;if(a){const u=T.value.slice();u.sort((L,A)=>L-A);const{value:p}=O,{value:S}=ae,{range:F}=e,Q=S?()=>!1:L=>F?L>=u[0]&&L<=u[u.length-1]:L<=u[0];for(const L of Object.keys(a)){const A=Number(L);o.push({active:Q(A),label:a[L],style:{[p]:`${_e(A)}%`}})}}return o});function J(o,a){const u=_e(o),{value:p}=O;return{[p]:`${u}%`,zIndex:a===k.value?1:0}}function be(o){return e.showTooltip||W.value===o||k.value===o&&N.value}function xe(o){return N.value?!(k.value===o&&ye.value===o):!0}function y(o){var a;~o&&(k.value=o,(a=d.value.get(o))===null||a===void 0||a.focus())}function D(){h.value.forEach((o,a)=>{be(a)&&o.syncPosition()})}function b(o){const{"onUpdate:value":a,onUpdateValue:u}=e,{nTriggerFormInput:p,nTriggerFormChange:S}=c;u&&ut(u,o),a&&ut(a,o),w.value=o,p(),S()}function C(o){const{range:a}=e;if(a){if(Array.isArray(o)){const{value:u}=T;o.join()!==u.join()&&b(o)}}else Array.isArray(o)||T.value[0]!==o&&b(o)}function fe(o,a){if(e.range){const u=T.value.slice();u.splice(a,1,o),C(u)}else C(o)}function ne(o,a,u){const p=u!==void 0;u||(u=o-a>0?1:-1);const S=we.value||[],{step:F}=e;if(F==="mark"){const A=ve(o,S.concat(a),p?u:void 0);return A?A.value:a}if(F<=0)return a;const{value:Q}=f;let L;if(p){const A=Number((a/F).toFixed(Q)),de=Math.floor(A),Ye=A>de?de:de-1,qe=A<de?de:de+1;L=ve(a,[Number((Ye*F).toFixed(Q)),Number((qe*F).toFixed(Q)),...S],u)}else{const A=Te(o);L=ve(o,[...S,A])}return L?Fe(L.value):a}function Fe(o){return Math.min(e.max,Math.max(e.min,o))}function _e(o){const{max:a,min:u}=e;return(o-u)/(a-u)*100}function Be(o){const{max:a,min:u}=e;return u+(a-u)*o}function Te(o){const{step:a,min:u}=e;if(a<=0||a==="mark")return o;const p=Math.round((o-u)/a)*a+u;return Number(p.toFixed(f.value))}function ve(o,a=we.value,u){if(!(a!=null&&a.length))return null;let p=null,S=-1;for(;++S<a.length;){const F=a[S]-o,Q=Math.abs(F);(u===void 0||F*u>0)&&(p===null||Q<p.distance)&&(p={index:S,distance:Q,value:a[S]})}return p}function X(o){const a=i.value;if(!a)return;const u=ft(o)?o.touches[0]:o,p=a.getBoundingClientRect();let S;return e.vertical?S=(p.bottom-u.clientY)/p.height:S=(u.clientX-p.left)/p.width,e.reverse&&(S=1-S),Be(S)}function Ee(o){if(M.value||!e.keyboard)return;const{vertical:a,reverse:u}=e;switch(o.key){case"ArrowUp":o.preventDefault(),se(a&&u?-1:1);break;case"ArrowRight":o.preventDefault(),se(!a&&u?-1:1);break;case"ArrowDown":o.preventDefault(),se(a&&u?1:-1);break;case"ArrowLeft":o.preventDefault(),se(!a&&u?1:-1);break}}function se(o){const a=k.value;if(a===-1)return;const{step:u}=e,p=T.value[a],S=u<=0||u==="mark"?p:p+u*o;fe(ne(S,p,o>0?1:-1),a)}function Rt(o){var a,u;if(M.value||!ft(o)&&o.button!==$n)return;const p=X(o);if(p===void 0)return;const S=T.value.slice(),F=e.range?(u=(a=ve(p,S))===null||a===void 0?void 0:a.index)!==null&&u!==void 0?u:-1:0;F!==-1&&(o.preventDefault(),y(F),zt(),fe(ne(p,T.value[F]),F))}function zt(){N.value||(N.value=!0,Ne("touchend",document,Ve),Ne("mouseup",document,Ve),Ne("touchmove",document,Ae),Ne("mousemove",document,Ae))}function Le(){N.value&&(N.value=!1,Ke("touchend",document,Ve),Ke("mouseup",document,Ve),Ke("touchmove",document,Ae),Ke("mousemove",document,Ae))}function Ae(o){const{value:a}=k;if(!N.value||a===-1){Le();return}const u=X(o);fe(ne(u,T.value[a]),a)}function Ve(){Le()}function Ft(o){k.value=o,M.value||(W.value=o)}function Bt(o){k.value===o&&(k.value=-1,Le()),W.value===o&&(W.value=-1)}function Tt(o){W.value=o}function Lt(o){W.value===o&&(W.value=-1)}lt(k,(o,a)=>void Ge(()=>ye.value=a)),lt(g,()=>{if(e.marks){if(ee.value)return;ee.value=!0,Ge(()=>{ee.value=!1})}Ge(D)}),St(()=>{Le()});const ot=H(()=>{const{self:{railColor:o,railColorHover:a,fillColor:u,fillColorHover:p,handleColor:S,opacityDisabled:F,dotColor:Q,dotColorModal:L,handleBoxShadow:A,handleBoxShadowHover:de,handleBoxShadowActive:Ye,handleBoxShadowFocus:qe,dotBorder:At,dotBoxShadow:Vt,railHeight:It,railWidthVertical:Nt,handleSize:Kt,dotHeight:Ht,dotWidth:Ut,dotBorderRadius:jt,fontSize:Ot,dotBorderActive:Xt,dotColorPopover:Yt},common:{cubicBezierEaseInOut:qt}}=r.value;return{"--n-bezier":qt,"--n-dot-border":At,"--n-dot-border-active":Xt,"--n-dot-border-radius":jt,"--n-dot-box-shadow":Vt,"--n-dot-color":Q,"--n-dot-color-modal":L,"--n-dot-color-popover":Yt,"--n-dot-height":Ht,"--n-dot-width":Ut,"--n-fill-color":u,"--n-fill-color-hover":p,"--n-font-size":Ot,"--n-handle-box-shadow":A,"--n-handle-box-shadow-active":Ye,"--n-handle-box-shadow-focus":qe,"--n-handle-box-shadow-hover":de,"--n-handle-color":S,"--n-handle-size":Kt,"--n-opacity-disabled":F,"--n-rail-color":o,"--n-rail-color-hover":a,"--n-rail-height":It,"--n-rail-width-vertical":Nt}}),ke=s?dt("slider",void 0,ot,e):void 0,it=H(()=>{const{self:{fontSize:o,indicatorColor:a,indicatorBoxShadow:u,indicatorTextColor:p,indicatorBorderRadius:S}}=r.value;return{"--n-font-size":o,"--n-indicator-border-radius":S,"--n-indicator-box-shadow":u,"--n-indicator-color":a,"--n-indicator-text-color":p}}),Se=s?dt("slider-indicator",void 0,it,e):void 0;return{mergedClsPrefix:t,namespace:n,uncontrolledValue:w,mergedValue:g,mergedDisabled:M,mergedPlacement:le,isMounted:sn(),adjustedTo:Je(e),dotTransitionDisabled:ee,markInfos:Z,isShowTooltip:be,shouldKeepTooltipTransition:xe,handleRailRef:i,setHandleRefs:l,setFollowerRefs:x,fillStyle:te,getHandleStyle:J,activeIndex:k,arrifiedValues:T,followerEnabledIndexSet:_,handleRailMouseDown:Rt,handleHandleFocus:Ft,handleHandleBlur:Bt,handleHandleMouseEnter:Tt,handleHandleMouseLeave:Lt,handleRailKeyDown:Ee,indicatorCssVars:s?void 0:it,indicatorThemeClass:Se==null?void 0:Se.themeClass,indicatorOnRender:Se==null?void 0:Se.onRender,cssVars:s?void 0:ot,themeClass:ke==null?void 0:ke.themeClass,onRender:ke==null?void 0:ke.onRender}},render(){var e;const{mergedClsPrefix:t,themeClass:n,formatTooltip:s}=this;return(e=this.onRender)===null||e===void 0||e.call(this),V("div",{class:[`${t}-slider`,n,{[`${t}-slider--disabled`]:this.mergedDisabled,[`${t}-slider--active`]:this.activeIndex!==-1,[`${t}-slider--with-mark`]:this.marks,[`${t}-slider--vertical`]:this.vertical,[`${t}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},V("div",{class:`${t}-slider-rail`},V("div",{class:`${t}-slider-rail__fill`,style:this.fillStyle}),this.marks?V("div",{class:[`${t}-slider-dots`,this.dotTransitionDisabled&&`${t}-slider-dots--transition-disabled`]},this.markInfos.map(r=>V("div",{key:r.label,class:[`${t}-slider-dot`,{[`${t}-slider-dot--active`]:r.active}],style:r.style}))):null,V("div",{ref:"handleRailRef",class:`${t}-slider-handles`},this.arrifiedValues.map((r,i)=>{const d=this.isShowTooltip(i);return V(_n,null,{default:()=>[V(kn,null,{default:()=>V("div",{ref:this.setHandleRefs(i),class:`${t}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,style:this.getHandleStyle(r,i),onFocus:()=>this.handleHandleFocus(i),onBlur:()=>this.handleHandleBlur(i),onMouseenter:()=>this.handleHandleMouseEnter(i),onMouseleave:()=>this.handleHandleMouseLeave(i)},rn(this.$slots.thumb,()=>[V("div",{class:`${t}-slider-handle`})]))}),this.tooltip&&V(Sn,{ref:this.setFollowerRefs(i),show:d,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(i),teleportDisabled:this.adjustedTo===Je.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>V(on,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(i),onEnter:()=>{this.followerEnabledIndexSet.add(i)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(i)}},{default:()=>{var l;return d?((l=this.indicatorOnRender)===null||l===void 0||l.call(this),V("div",{class:[`${t}-slider-handle-indicator`,this.indicatorThemeClass,`${t}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof s=="function"?s(r):r)):null}})})]})})),this.marks?V("div",{class:`${t}-slider-marks`},this.markInfos.map(r=>V("div",{key:r.label,class:`${t}-slider-mark`,style:r.style},r.label))):null))}}),Fn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Bn=ce("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"44",d:"M358.62 129.28L86.49 402.08L70 442l39.92-16.49l272.8-272.13l-24.1-24.1z"},null,-1),Tn=ce("path",{d:"M413.07 74.84l-11.79 11.78l24.1 24.1l11.79-11.79a16.51 16.51 0 0 0 0-23.34l-.75-.75a16.51 16.51 0 0 0-23.35 0z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"44"},null,-1),Ln=[Bn,Tn],pt=ge({name:"Pencil",render:function(t,n){return ue(),pe("svg",Fn,Ln)}}),An={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vn=ce("path",{d:"M336 96a80 80 0 1 0-96 78.39v283.17a32.09 32.09 0 0 0 2.49 12.38l10.07 24a3.92 3.92 0 0 0 6.88 0l10.07-24a32.09 32.09 0 0 0 2.49-12.38V174.39A80.13 80.13 0 0 0 336 96zm-56 0a24 24 0 1 1 24-24a24 24 0 0 1-24 24z",fill:"currentColor"},null,-1),In=[Vn],Nn=ge({name:"Pin",render:function(t,n){return ue(),pe("svg",An,In)}}),Kn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Hn=ce("circle",{cx:"256",cy:"96",r:"64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),Un=ce("path",{d:"M272 164a9 9 0 0 0-9-9h-14a9 9 0 0 0-9 9v293.56a32.09 32.09 0 0 0 2.49 12.38l10.07 24a3.92 3.92 0 0 0 6.88 0l10.07-24a32.09 32.09 0 0 0 2.49-12.38z",fill:"currentColor"},null,-1),jn=ce("circle",{cx:"280",cy:"72",r:"24",fill:"currentColor"},null,-1),On=[Hn,Un,jn],Xn=ge({name:"PinOutline",render:function(t,n){return ue(),pe("svg",Kn,On)}}),Yn=ge({__name:"index",props:{storageKey:null,initial:null},setup(e){var d;const t=e,n=$(null),s=(d=t.initial)!=null?d:{x:0,y:0},r=t.storageKey?rt(t.storageKey,s):$(s),{style:i}=an(n,{initialValue:r});return(l,h)=>(ue(),pe("div",{ref_key:"el",ref:n,class:"fixed",style:Ze(m(i))},[ln(l.$slots,"default")],4))}});function mt(e,t,n,s=r=>r){return e*s(.5-t*(.5-n))}function qn(e){return[-e[0],-e[1]]}function G(e,t){return[e[0]+t[0],e[1]+t[1]]}function U(e,t){return[e[0]-t[0],e[1]-t[1]]}function q(e,t){return[e[0]*t,e[1]*t]}function Gn(e,t){return[e[0]/t,e[1]/t]}function Pe(e){return[e[1],-e[0]]}function Wn(e,t){return e[0]*t[0]+e[1]*t[1]}function Zn(e,t){return e[0]===t[0]&&e[1]===t[1]}function Jn(e){return Math.hypot(e[0],e[1])}function Qn(e){return e[0]*e[0]+e[1]*e[1]}function gt(e,t){return Qn(U(e,t))}function Ct(e){return Gn(e,Jn(e))}function es(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function $e(e,t,n){let s=Math.sin(n),r=Math.cos(n),i=e[0]-t[0],d=e[1]-t[1],l=i*r-d*s,h=i*s+d*r;return[l+t[0],h+t[1]]}function Qe(e,t,n){return G(e,q(U(t,e),n))}function wt(e,t,n){return G(e,q(t,n))}var{min:Ce,PI:ts}=Math,yt=.275,Re=ts+1e-4;function ns(e,t={}){let{size:n=16,smoothing:s=.5,thinning:r=.5,simulatePressure:i=!0,easing:d=y=>y,start:l={},end:h={},last:x=!1}=t,{cap:_=!0,easing:c=y=>y*(2-y)}=l,{cap:M=!0,easing:f=y=>--y*y*y+1}=h;if(e.length===0||n<=0)return[];let w=e[e.length-1].runningLength,z=l.taper===!1?0:l.taper===!0?Math.max(n,w):l.taper,g=h.taper===!1?0:h.taper===!0?Math.max(n,w):h.taper,T=Math.pow(n*s,2),ae=[],le=[],we=e.slice(0,10).reduce((y,D)=>{let b=D.pressure;if(i){let C=Ce(1,D.distance/n),fe=Ce(1,1-C);b=Ce(1,y+(fe-y)*(C*yt))}return(y+b)/2},e[0].pressure),k=mt(n,r,e[e.length-1].pressure,d),ye,W=e[0].vector,N=e[0].point,ee=N,O=N,te=ee;for(let y=0;y<e.length;y++){let{pressure:D}=e[y],{point:b,vector:C,distance:fe,runningLength:ne}=e[y];if(y<e.length-1&&w-ne<3)continue;if(r){if(i){let X=Ce(1,fe/n),Ee=Ce(1,1-X);D=Ce(1,we+(Ee-we)*(X*yt))}k=mt(n,r,D,d)}else k=n/2;ye===void 0&&(ye=k);let Fe=ne<z?c(ne/z):1,_e=w-ne<g?f((w-ne)/g):1;if(k=Math.max(.01,k*Math.min(Fe,_e)),y===e.length-1){let X=q(Pe(C),k);ae.push(U(b,X)),le.push(G(b,X));continue}let Be=e[y+1].vector,Te=Wn(C,Be);if(Te<0){let X=q(Pe(W),k);for(let Ee=1/13,se=0;se<=1;se+=Ee)O=$e(U(b,X),b,Re*se),ae.push(O),te=$e(G(b,X),b,Re*-se),le.push(te);N=O,ee=te;continue}let ve=q(Pe(Qe(Be,C,Te)),k);O=U(b,ve),(y<=1||gt(N,O)>T)&&(ae.push(O),N=O),te=G(b,ve),(y<=1||gt(ee,te)>T)&&(le.push(te),ee=te),we=D,W=C}let Z=e[0].point.slice(0,2),J=e.length>1?e[e.length-1].point.slice(0,2):G(e[0].point,[1,1]),be=[],xe=[];if(e.length===1){if(!(z||g)||x){let y=wt(Z,Ct(Pe(U(Z,J))),-(ye||k)),D=[];for(let b=1/13,C=b;C<=1;C+=b)D.push($e(y,Z,Re*2*C));return D}}else{if(!(z||g&&e.length===1))if(_)for(let D=1/13,b=D;b<=1;b+=D){let C=$e(le[0],Z,Re*b);be.push(C)}else{let D=U(ae[0],le[0]),b=q(D,.5),C=q(D,.51);be.push(U(Z,b),U(Z,C),G(Z,C),G(Z,b))}let y=Pe(qn(e[e.length-1].vector));if(g||z&&e.length===1)xe.push(J);else if(M){let D=wt(J,y,k);for(let b=1/29,C=b;C<1;C+=b)xe.push($e(D,J,Re*3*C))}else xe.push(G(J,q(y,k)),G(J,q(y,k*.99)),U(J,q(y,k*.99)),U(J,q(y,k)))}return ae.concat(xe,le.reverse(),be)}function ss(e,t={}){var n;let{streamline:s=.5,size:r=16,last:i=!1}=t;if(e.length===0)return[];let d=.15+(1-s)*.85,l=Array.isArray(e[0])?e:e.map(({x:f,y:w,pressure:z=.5})=>[f,w,z]);if(l.length===2){let f=l[1];l=l.slice(0,-1);for(let w=1;w<5;w++)l.push(Qe(l[0],f,w/4))}l.length===1&&(l=[...l,[...G(l[0],[1,1]),...l[0].slice(2)]]);let h=[{point:[l[0][0],l[0][1]],pressure:l[0][2]>=0?l[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],x=!1,_=0,c=h[0],M=l.length-1;for(let f=1;f<l.length;f++){let w=i&&f===M?l[f].slice(0,2):Qe(c.point,l[f],d);if(Zn(c.point,w))continue;let z=es(w,c.point);if(_+=z,f<M&&!x){if(_<r)continue;x=!0}c={point:w,pressure:l[f][2]>=0?l[f][2]:.5,vector:Ct(U(c.point,w)),distance:z,runningLength:_},h.push(c)}return h[0].vector=((n=h[1])==null?void 0:n.vector)||[0,0],h}function rs(e,t={}){return ns(ss(e,t),t)}var os=()=>({events:{},emit(e,...t){let n=this.events[e]||[];for(let s=0,r=n.length;s<r;s++)n[s](...t)},on(e,t){var n;return(n=this.events[e])!=null&&n.push(t)||(this.events[e]=[t]),()=>{var s;this.events[e]=(s=this.events[e])==null?void 0:s.filter(r=>t!==r)}}});function je(e,t){return e-t}function is(e){return e<0?-1:1}function Oe(e){return[Math.abs(e),is(e)]}function Mt(){const e=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${e()+e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}var as=2,oe=as,Me=class{constructor(e){this.drauu=e,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(e){}onUnselected(){}onStart(e){}onMove(e){return!1}onEnd(e){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(e){var r;var t;const n=this.drauu.el,s=(r=this.drauu.options.coordinateScale)!=null?r:1;if(this.drauu.options.coordinateTransform===!1){const i=this.drauu.el.getBoundingClientRect();return{x:(e.pageX-i.left)*s,y:(e.pageY-i.top)*s,pressure:e.pressure}}else{const i=this.drauu.svgPoint;i.x=e.clientX,i.y=e.clientY;const d=i.matrixTransform((t=n.getScreenCTM())==null?void 0:t.inverse());return{x:d.x*s,y:d.y*s,pressure:e.pressure}}}createElement(e,t){var r;const n=document.createElementNS("http://www.w3.org/2000/svg",e),s=t?{...this.brush,...t}:this.brush;return n.setAttribute("fill",(r=s.fill)!=null?r:"transparent"),n.setAttribute("stroke",s.color),n.setAttribute("stroke-width",s.size.toString()),n.setAttribute("stroke-linecap","round"),s.dasharray&&n.setAttribute("stroke-dasharray",s.dasharray),n}attr(e,t){this.el.setAttribute(e,typeof t=="string"?t:t.toFixed(oe))}_setEvent(e){this.event=e,this.point=this.getMousePosition(e)}_eventDown(e){return this._setEvent(e),this.start=this.point,this.onStart(this.point)}_eventMove(e){return this._setEvent(e),this.onMove(this.point)}_eventUp(e){return this._setEvent(e),this.onEnd(this.point)}},ls=class extends Me{constructor(){super(...arguments),this.points=[]}onStart(e){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[e],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&this.points.push(e),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!!e}getSvgData(e){const t=rs(e,{size:this.brush.size*2,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5},...this.brush.stylusOptions});if(!t.length)return"";const n=t.reduce((s,[r,i],d,l)=>{const[h,x]=l[(d+1)%l.length];return s.push(r,i,(r+h)/2,(i+x)/2),s},["M",...t[0],"Q"]);return n.push("Z"),n.map(s=>typeof s=="number"?s.toFixed(2):s).join(" ")}},ds=class extends Me{onStart(e){return this.el=this.createElement("ellipse"),this.attr("cx",e.x),this.attr("cy",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,n]=Oe(e.x-this.start.x),[s,r]=Oe(e.y-this.start.y);if(this.shiftPressed){const i=Math.min(t,s);t=i,s=i}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",t),this.attr("ry",s);else{const[i,d]=[this.start.x,this.start.x+t*n].sort(je),[l,h]=[this.start.y,this.start.y+s*r].sort(je);this.attr("cx",(i+d)/2),this.attr("cy",(l+h)/2),this.attr("rx",(d-i)/2),this.attr("ry",(h-l)/2)}return!0}onEnd(){const e=this.el;return this.el=null,!(!e||!e.getTotalLength())}};function Et(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("fill",t),s.setAttribute("id",e),s.setAttribute("viewBox","0 -5 10 10"),s.setAttribute("refX","5"),s.setAttribute("refY","0"),s.setAttribute("markerWidth","4"),s.setAttribute("markerHeight","4"),s.setAttribute("orient","auto"),r.setAttribute("d","M0,-5L10,0L0,5"),s.appendChild(r),n.appendChild(s),n}var us=class extends Me{onStart(e){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",e.x),this.attr("y1",e.y),this.attr("x2",e.x),this.attr("y2",e.y),this.brush.arrowEnd){const t=Mt(),n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.append(Et(t,this.brush.color)),n.append(this.el),this.attr("marker-end",`url(#${t})`),n}return this.el}onMove(e){if(!this.el)return!1;let{x:t,y:n}=e;if(this.shiftPressed){const s=e.x-this.start.x,r=e.y-this.start.y;if(r!==0){let i=s/r;i=Math.round(i),Math.abs(i)<=1?(t=this.start.x+r*i,n=this.start.y+r):(t=this.start.x+s,n=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-t),this.attr("y1",this.start.y*2-n),this.attr("x2",t),this.attr("y2",n)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",t),this.attr("y2",n)),!0}onEnd(){const e=this.el;return this.el=null,!(!e||e.getTotalLength()<5)}},cs=class extends Me{onStart(e){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",e.x),this.attr("y",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,n]=Oe(e.x-this.start.x),[s,r]=Oe(e.y-this.start.y);if(this.shiftPressed){const i=Math.min(t,s);t=i,s=i}if(this.altPressed)this.attr("x",this.start.x-t),this.attr("y",this.start.y-s),this.attr("width",t*2),this.attr("height",s*2);else{const[i,d]=[this.start.x,this.start.x+t*n].sort(je),[l,h]=[this.start.y,this.start.y+s*r].sort(je);this.attr("x",i),this.attr("y",l),this.attr("width",d-i),this.attr("height",h-l)}return!0}onEnd(){const e=this.el;return this.el=null,!(!e||!e.getTotalLength())}};function hs(e,t){const n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function fs(e,t,n){let s=t.x,r=t.y,i=n.x-s,d=n.y-r;if(i!==0||d!==0){const l=((e.x-s)*i+(e.y-r)*d)/(i*i+d*d);l>1?(s=n.x,r=n.y):l>0&&(s+=i*l,r+=d*l)}return i=e.x-s,d=e.y-r,i*i+d*d}function vs(e,t){let n=e[0];const s=[n];let r;for(let i=1,d=e.length;i<d;i++)r=e[i],hs(r,n)>t&&(s.push(r),n=r);return n!==r&&r&&s.push(r),s}function et(e,t,n,s,r){let i=s,d=0;for(let l=t+1;l<n;l++){const h=fs(e[l],e[t],e[n]);h>i&&(d=l,i=h)}i>s&&(d-t>1&&et(e,t,d,s,r),r.push(e[d]),n-d>1&&et(e,d,n,s,r))}function ps(e,t){const n=e.length-1,s=[e[0]];return et(e,0,n,t,s),s.push(e[n]),s}function bt(e,t,n=!1){if(e.length<=2)return e;const s=t!==void 0?t*t:1;return e=n?e:vs(e,s),e=ps(e,s),e}var ms=class extends Me{constructor(){super(...arguments),this.points=[],this.count=0}onStart(e){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[e],this.brush.arrowEnd){this.arrowId=Mt();const t=Et(this.arrowId,this.brush.color);this.el.appendChild(t)}return this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&(this.points.push(e),this.count+=1),this.count>5&&(this.points=bt(this.points,1,!0),this.count=0),this.attr("d",_t(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!(!e||(e.setAttribute("d",_t(bt(this.points,1,!0))),!e.getTotalLength()))}};function gs(e,t){const n=t.x-e.x,s=t.y-e.y;return{length:Math.sqrt(Math.pow(n,2)+Math.pow(s,2)),angle:Math.atan2(s,n)}}function xt(e,t,n,s){const r=t||e,i=n||e,d=.2,l=gs(r,i),h=l.angle+(s?Math.PI:0),x=l.length*d,_=e.x+Math.cos(h)*x,c=e.y+Math.sin(h)*x;return{x:_,y:c}}function ws(e,t,n){const s=xt(n[t-1],n[t-2],e),r=xt(e,n[t-1],n[t+1],!0);return`C ${s.x.toFixed(oe)},${s.y.toFixed(oe)} ${r.x.toFixed(oe)},${r.y.toFixed(oe)} ${e.x.toFixed(oe)},${e.y.toFixed(oe)}`}function _t(e){return e.reduce((t,n,s,r)=>s===0?`M ${n.x.toFixed(oe)},${n.y.toFixed(oe)}`:`${t} ${ws(n,s,r)}`,"")}var ys=class extends Me{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[]}onSelected(e){const t=(n,s)=>{if(n&&n.length)for(let r=0;r<n.length;r++){const i=n[r];if(i.getTotalLength){const d=i.getTotalLength();for(let l=0;l<this.pathSubFactor;l++){const h=i.getPointAtLength(d*l/this.pathSubFactor),x=i.getPointAtLength(d*(l+1)/this.pathSubFactor);this.pathFragments.push({x1:h.x,x2:x.x,y1:h.y,y2:x.y,segment:l,element:s||i})}}else i.children&&t(i.children,i)}};e&&t(e.children)}onUnselected(){this.pathFragments=[]}onStart(e){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=e.x,this.svgPointPrevious.y=e.y}onMove(e){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=e.x,this.svgPointCurrent.y=e.y;const t=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,t}onEnd(){return this.svgPointPrevious=void 0,this.svgPointCurrent=void 0,!0}checkAndEraseElement(){const e=[];if(this.pathFragments.length)for(let t=0;t<this.pathFragments.length;t++){const n=this.pathFragments[t],s={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(n,s)&&(n.element.remove(),e.push(t))}return e.length&&(this.pathFragments=this.pathFragments.filter((t,n)=>!e.includes(n))),e.length>0}lineLineIntersect(e,t){const n=e.x1,s=e.x2,r=t.x1,i=t.x2,d=e.y1,l=e.y2,h=t.y1,x=t.y2,_=(n-s)*(h-x)-(d-l)*(r-i),c=(n*l-d*s)*(r-i)-(n-s)*(r*x-h*i),M=(n*l-d*s)*(h-x)-(d-l)*(r*x-h*i),f=(w,z,g)=>w>=z&&w<=g?!0:w>=g&&w<=z;if(_===0)return!1;{const w={x:c/_,y:M/_};return f(w.x,n,s)&&f(w.y,d,l)&&f(w.x,r,i)&&f(w.y,h,x)}}};function bs(e){return{draw:new ms(e),stylus:new ls(e),line:new us(e),rectangle:new cs(e),ellipse:new ds(e),eraseLine:new ys(e)}}var xs=class{constructor(e={}){this.options=e,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=os(),this._models=bs(this),this._undoStack=[],this._disposables=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),e.el&&this.mount(e.el,e.eventTarget)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(e){this._models[this.mode].onUnselected(),this.options.brush.mode=e,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(e){this.options.brush=e}resolveSelector(e){return typeof e=="string"?document.querySelector(e):e||null}mount(e,t){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(e),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const n=this.resolveSelector(t)||this.el,s=this.eventStart.bind(this),r=this.eventMove.bind(this),i=this.eventEnd.bind(this),d=this.eventKeyboard.bind(this);n.addEventListener("pointerdown",s,{passive:!1}),window.addEventListener("pointermove",r,{passive:!1}),window.addEventListener("pointerup",i,{passive:!1}),window.addEventListener("pointercancel",i,{passive:!1}),window.addEventListener("keydown",d,!1),window.addEventListener("keyup",d,!1),this._disposables.push(()=>{n.removeEventListener("pointerdown",s),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i),window.removeEventListener("keydown",d,!1),window.removeEventListener("keyup",d,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(e=>e()),this._disposables.length=0,this.el=null,this._emitter.emit("unmounted")}on(e,t){return this._emitter.on(e,t)}undo(){const e=this.el;return e.lastElementChild?(this._undoStack.push(e.lastElementChild.cloneNode(!0)),e.lastElementChild.remove(),this._emitter.emit("changed"),!0):!1}redo(){return this._undoStack.length?(this.el.appendChild(this._undoStack.pop()),this._emitter.emit("changed"),!0):!1}canRedo(){return!!this._undoStack.length}canUndo(){var e;return!!((e=this.el)!=null&&e.lastElementChild)}eventMove(e){!this.acceptsInput(e)||!this.drawing||this.model._eventMove(e)&&(e.stopPropagation(),e.preventDefault(),this._emitter.emit("changed"))}eventStart(e){!this.acceptsInput(e)||(e.stopPropagation(),e.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._emitter.emit("start"),this._currentNode=this.model._eventDown(e),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(e){if(!this.acceptsInput(e)||!this.drawing)return;const t=this.model._eventUp(e);t?(t instanceof Element&&t!==this._currentNode&&(this._currentNode=t),this.commit()):this.cancel(),this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed")}acceptsInput(e){return!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(e.pointerType)}eventKeyboard(e){this.shiftPressed===e.shiftKey&&this.altPressed===e.altKey||(this.shiftPressed=e.shiftKey,this.altPressed=e.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(){this._undoStack.length=0;const e=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",e)}clear(){this._undoStack.length=0,this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(e){this.clear(),this.el.innerHTML=e}};function _s(e){return new xs(e)}const ks=dn("drauu",{state:()=>({drauuDump:{},drawingMode:{},brush:{}}),persist:{enabled:!0,strategies:[{storage:localStorage,paths:["drauuDump","drawingMode","brush"]}]},getters:{getDrauuDump(e){return e.drauuDump},getDdrawingMode(e){return e.drawingMode},getBrush(e){return e.brush}},actions:{setDrauuDumpOne(e,t){const n=this.drauuDump;n[e]=t,this.drauuDump=n},setDdrawingMode(e,t){const n=this.drawingMode;n[e]=t,this.drawingMode=n},setBrush(e,t){const n=this.brush;n[e]=t,this.brush=n}}}),me=ks(),he=$(1),Xe=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],ie=rt("slidev-drawing-enabled",!1),re=rt("slidev-drawing-pinned",!0),tt=$(!1),nt=$(!1),ze=$(!1),Dt=$(!1),We=$(!1),B=H({get(){var e;return(e=me.getBrush[String(he.value)])!=null?e:{color:Xe[0],size:4,mode:"stylus",dasharray:void 0}},set(e){me.setBrush(String(he.value),e)}});let st=!1;const I=H({get(){var e;return(e=me.getDdrawingMode[String(he.value)])!=null?e:"stylus"},set(e){me.setDdrawingMode(String(he.value),e),e==="arrow"?B.value={...B.value,mode:"line",arrowEnd:!0}:B.value={...B.value,mode:e,arrowEnd:!1}}}),Ss=un({brush:B,acceptsInputTypes:H(()=>ie.value?void 0:["pen"]),coordinateTransform:!1}),R=cn(_s(Ss));function Pt(){R.clear(),me.setDrauuDumpOne(String(he.value),"")}function Cs(){var e;nt.value=R.canRedo(),tt.value=R.canUndo(),ze.value=!!((e=R.el)!=null&&e.children.length)}function Ms(e){he.value=e}function Es(e){st=!0;const t=me.getDrauuDump[String(e||he.value)];t?R.load(t):R.clear(),st=!1,ie.value=!0}R.on("changed",()=>{if(!We.value){const e=wn(()=>{Cs(),We.value=!1,yn(e)});We.value=!0}if(!st){const e=R.dump(),t=String(he.value);me.setDrauuDumpOne(t,e)}});R.on("start",()=>Dt.value=!0);R.on("end",()=>Dt.value=!1);window.addEventListener("keydown",e=>{if(!ie.value)return;const t=!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey;let n=!0;e.code==="KeyZ"&&(e.ctrlKey||e.metaKey||e.shiftKey)?e.shiftKey?R.redo():R.undo():e.code==="Escape"?ie.value=!1:e.code==="KeyL"&&t?I.value="line":e.code==="KeyA"&&t?I.value="arrow":e.code==="KeyS"&&t?I.value="stylus":e.code==="KeyD"&&t?I.value="draw":e.code==="KeyR"&&t?I.value="rectangle":e.code==="KeyE"&&t?I.value="ellipse":e.code==="KeyC"&&t?Pt():e.code.startsWith("Digit")&&t&&+e.code[5]<=Xe.length?B.value={...B.value,color:Xe[+e.code[5]-1]}:n=!1,n&&(e.preventDefault(),e.stopPropagation())},!1);const Ds=j(" \u89E6\u7B14(S) "),Ps=j(" \u7ED8\u753B(D) "),$s=j(" \u76F4\u7EBF(L) "),Rs=j(" \u76F4\u7EBF\u7BAD\u5934(A) "),zs=j(" \u5706\u5F62(E) "),Fs=j(" \u6B63\u65B9\u5F62(R) "),Bs=j(" \u2505 "),Ts=j(" \u22EF "),Ls=j(" \u64A4\u9500(ctrl+Z) "),As=j(" \u590D\u4F4D(shift+Z) "),Vs=j(" \u6E05\u9664(C) "),Is=j(" \u4E0B\u8F7D "),Ns=ge({name:"drawing-drauu-did"}),$t=ge({...Ns,props:{did:null},setup(e){const t=e,n=$();hn(()=>{Ms(Number(t.did)),R.mount(n.value),Es(),d(I.value)}),St(()=>{R.unmount()});function s(){R.undo()}function r(){R.redo()}function i(){R.el.setAttribute("xmlns","http://www.w3.org/2000/svg");const _=R.el.outerHTML||"",c=new Blob([_],{type:"image/svg+xml"}),M=window.document.createElement("a");M.href=window.URL.createObjectURL(c),M.download="drauu"+Number(t.did)+".svg",document.body.appendChild(M),M.click(),document.body.removeChild(M)}function d(_){I.value=_,ie.value=!0,x(void 0)}function l(_){B.value={...B.value,color:_},ie.value=!0}function h(_){B.value={...B.value,size:_},ie.value=!0}function x(_){B.value={...B.value,dasharray:_},ie.value=!0}return(_,c)=>{const M=vn,f=pn,w=zn,z=Cn;return ue(),pe(ct,null,[E(f,{"mb-10":"",type:"success",dashed:"",onClick:c[0]||(c[0]=g=>re.value=!m(re))},{default:P(()=>[He(E(M,{size:"18",component:m(pt),class:"transform -rotate-45"},null,8,["component"]),[[Ue,m(re)]]),He(E(M,{size:"18",component:m(pt)},null,8,["component"]),[[Ue,!m(re)]])]),_:1}),ce("div",{style:Ze("background-image: url("+m(bn)("cafe.png")+")")},[(ue(),pe("svg",{ref_key:"svg",ref:n,class:"w-full",style:{height:"calc(100vh - 195px)"}},null,512)),E(Yn,{flex:"","flex-wrap":"","text-xl":"","p-2":"","gap-1":"","rounded-md":"","bg-main":"",shadow:"","transition-opacity":"","duration-200":"",class:Y(m(re)?"opacity-90":"opacity-0 pointer-events-none"),"storage-key":"slidev-drawing-pos",initial:{x:280,y:105}},{default:P(()=>[E(z,null,{default:P(()=>[E(f,{type:"success",dashed:"",class:Y({"opacity-60":m(I)!=="stylus"}),onClick:c[1]||(c[1]=g=>d("stylus"))},{default:P(()=>[Ds]),_:1},8,["class"]),E(f,{type:"success",dashed:"",class:Y({"opacity-60":m(I)!=="draw"}),onClick:c[2]||(c[2]=g=>d("draw"))},{default:P(()=>[Ps]),_:1},8,["class"]),E(f,{type:"success",dashed:"",class:Y({"opacity-60":m(I)!=="line"}),onClick:c[3]||(c[3]=g=>d("line"))},{default:P(()=>[$s]),_:1},8,["class"]),E(f,{type:"success",dashed:"",class:Y({"opacity-60":m(I)!=="arrow"}),onClick:c[4]||(c[4]=g=>d("arrow"))},{default:P(()=>[Rs]),_:1},8,["class"]),E(f,{type:"success",dashed:"",class:Y({"opacity-60":m(I)!=="ellipse"}),onClick:c[5]||(c[5]=g=>d("ellipse"))},{default:P(()=>[zs]),_:1},8,["class"]),E(f,{type:"success",dashed:"",class:Y({"opacity-60":m(I)!=="rectangle"}),onClick:c[6]||(c[6]=g=>d("rectangle"))},{default:P(()=>[Fs]),_:1},8,["class"]),E(f,{type:"success",dashed:"",class:Y({"opacity-60":m(B).dasharray!=="4"}),onClick:c[7]||(c[7]=g=>x("4"))},{default:P(()=>[Bs]),_:1},8,["class"]),E(f,{type:"success",dashed:"",class:Y({"opacity-60":m(B).dasharray!=="1 7"}),onClick:c[8]||(c[8]=g=>x("1 7"))},{default:P(()=>[Ts]),_:1},8,["class"]),E(f,{"w-100":"",class:Y({"opacity-90":!0})},{default:P(()=>[E(w,{"w-100":"","default-value":4,step:.5,max:10,min:0,"onUpdate:value":h},null,8,["step"])]),_:1}),(ue(!0),pe(ct,null,fn(m(Xe),g=>(ue(),mn(f,{key:g,dashed:"",type:m(B).color!==g?"default":"success",onClick:T=>l(g)},{default:P(()=>[ce("div",{class:Y(["w-6 h-6 transition-all transform border border-gray-400/50",m(B).color!==g?"rounded-1/2 scale-85":"rounded-md"]),style:Ze(m(ie)?{background:g}:{borderColor:g})},null,6)]),_:2},1032,["type","onClick"]))),128)),E(f,{type:m(tt)?"success":"default",dashed:"",disabled:!m(tt),onClick:c[9]||(c[9]=g=>s())},{default:P(()=>[Ls]),_:1},8,["type","disabled"]),E(f,{type:m(nt)?"success":"default",dashed:"",disabled:!m(nt),onClick:c[10]||(c[10]=g=>r())},{default:P(()=>[As]),_:1},8,["type","disabled"]),E(f,{type:m(ze)?"success":"default",dashed:"",disabled:!m(ze),onClick:c[11]||(c[11]=g=>m(Pt)())},{default:P(()=>[Vs]),_:1},8,["type","disabled"]),E(f,{type:m(ze)?"success":"default",dashed:"",disabled:!m(ze),onClick:c[12]||(c[12]=g=>i())},{default:P(()=>[Is]),_:1},8,["type","disabled"]),E(f,{dashed:"",onClick:c[13]||(c[13]=g=>re.value=!m(re))},{default:P(()=>[He(E(M,{size:"18",component:m(Nn)},null,8,["component"]),[[Ue,m(re)]]),He(E(M,{size:"18",component:m(Xn),class:"transform -rotate-45"},null,8,["component"]),[[Ue,!m(re)]])]),_:1})]),_:1})]),_:1},8,["class"])],4)],64)}}});typeof ht=="function"&&ht($t);const Zs=gn($t,[["__scopeId","data-v-6c75c0eb"]]);export{Zs as default};
