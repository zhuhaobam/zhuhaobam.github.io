import{X as n,af as h,T as i}from"./main-769b7253.js";const{toString:c}=Object.prototype;function o(t,e){return c.call(t)===`[object ${e}]`}function T(t){return o(t,"String")}const p=["/404","/:id","/login","/system/user","/system/setting"],l=n("tags",{state:()=>({tags:[],activeTag:""}),persist:{enabled:!0,strategies:[{storage:localStorage,paths:["tags","activeTag"]}]},getters:{hasEmpty(t){return t.tags.length===0},leastTwo(t){return t.tags.length>1},getActiveTag(t){return t.activeTag}},actions:{clear(){this.activeTag="",this.tags=[]},setActiveTag(t){this.activeTag=t},setTags(t){this.tags=h(t)},addTag(t){const e=t.path;let s={...t};if(e.endsWith(":id")){const a=Object.fromEntries(Object.entries(t.params).map(([r,g])=>[r,g]));T(a.id)&&(this.setActiveTag(e.replace(":id",a.id)),s={...t,path:e.replace(":id",a.id)})}else this.setActiveTag(e);p.includes(e)||this.tags.some(a=>a.path===s.path)||this.setTags([...this.tags,s])},removeOtherTag(t){t!==this.activeTag&&i.push(t),this.setTags(this.tags.filter(e=>e.path===t))},removeTag(t){if(t===this.activeTag){const e=this.tags.findIndex(s=>s.path===t);e>0?i.push(this.tags[e-1].path):i.push(this.tags[e+1].path)}this.setTags(this.tags.filter(e=>e.path!==t))}}});export{l as u};
