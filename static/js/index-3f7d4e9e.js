import{al as Gt,c2 as Wt,r as $,c3 as Zt,O as Pe,m as f,n as U,P as Ne,an as at,bE as Qt,bF as Jt,d as we,q as en,p as kt,bt as tn,c as N,U as nn,w as lt,ag as We,b as St,s as dt,ap as sn,t as I,as as rn,a6 as on,aF as He,aD as Ke,V as ut,e as ue,v as ge,x as ce,c4 as rt,c5 as an,A as ln,B as ze,j as v,ah as dn,a1 as un,a2 as cn,i as hn,o as fn,h as M,g as D,bn as Ue,bj as je,c6 as q,H as ct,ac as vn,ae as O,N as pn,c1 as gn,f as mn,_ as wn}from"./main-291f3adb.js";import{r as yn,c as bn}from"./requestAnimationFrameGrace-eaa77346.js";import{g as xn}from"./assets-kit-bc859cd0.js";import{u as _n}from"./full-2f757101.js";import{u as kn}from"./use-merged-state-fed4a42a.js";import{u as Qe,V as Sn,a as Cn,b as Mn}from"./Follower-dfcd9fbc.js";import{_ as En}from"./Space-444191c8.js";import{b as ht}from"./route-block-7ae06361.js";import"./next-frame-once-c806eabc.js";import"./on-fonts-ready-eb3fb3d1.js";import"./get-slot-6dd27322.js";const Pn=e=>{const t="rgba(0, 0, 0, .85)",n="0 2px 8px 0 rgba(0, 0, 0, 0.12)",{railColor:s,primaryColor:r,baseColor:i,cardColor:d,modalColor:l,popoverColor:h,borderRadius:w,fontSize:z,opacityDisabled:E}=e;return Object.assign(Object.assign({},Wt),{fontSize:z,railColor:s,railColorHover:s,fillColor:r,fillColorHover:r,opacityDisabled:E,handleColor:"#FFF",dotColor:d,dotColorModal:l,dotColorPopover:h,handleBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowHover:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowActive:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowFocus:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",indicatorColor:t,indicatorBoxShadow:n,indicatorTextColor:i,indicatorBorderRadius:w,dotBorder:`2px solid ${s}`,dotBorderActive:`2px solid ${r}`,dotBoxShadow:""})},Dn={name:"Slider",common:Gt,self:Pn},$n=Dn;function ft(e){return window.TouchEvent&&e instanceof window.TouchEvent}function vt(){const e=$(new Map),t=n=>s=>{e.value.set(n,s)};return Zt(()=>e.value.clear()),[e,t]}const Rn=Pe([f("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[U("reverse",[f("slider-handles",[f("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),f("slider-dots",[f("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),U("vertical",[f("slider-handles",[f("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),f("slider-marks",[f("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),f("slider-dots",[f("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),U("vertical",`
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[f("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[f("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),f("slider-rail",`
 height: 100%;
 `,[Ne("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),U("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),f("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 `,[f("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),f("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[f("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),U("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[f("slider-handle",`
 cursor: not-allowed;
 `)]),U("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),Pe("&:hover",[f("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[Ne("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),f("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),U("active",[f("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[Ne("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),f("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),f("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[f("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),f("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[Ne("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),f("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[f("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[f("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[Pe("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),Pe("&:focus",[f("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[Pe("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),f("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[U("transition-disabled",[f("slider-dot","transition: none;")]),f("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[U("active","border: var(--n-dot-border-active);")])])]),f("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[at()]),f("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[U("top",`
 margin-bottom: 12px;
 `),U("right",`
 margin-left: 12px;
 `),U("bottom",`
 margin-top: 12px;
 `),U("left",`
 margin-right: 12px;
 `),at()]),Qt(f("slider",[f("slider-dot","background-color: var(--n-dot-color-modal);")])),Jt(f("slider",[f("slider-dot","background-color: var(--n-dot-color-popover);")]))]),zn=0,Fn=Object.assign(Object.assign({},kt.props),{to:Qe.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),Bn=we({name:"Slider",props:Fn,setup(e){const{mergedClsPrefixRef:t,namespaceRef:n,inlineThemeDisabled:s}=en(e),r=kt("Slider","-slider",Rn,$n,e,t),i=$(null),[d,l]=vt(),[h,w]=vt(),z=$(new Set),E=tn(e),{mergedDisabledRef:L}=E,g=N(()=>{const{step:o}=e;if(o<=0||o==="mark")return 0;const a=o.toString();let u=0;return a.includes(".")&&(u=a.length-a.indexOf(".")-1),u}),c=$(e.defaultValue),_=nn(e,"value"),y=kn(_,c),T=N(()=>{const{value:o}=y;return(e.range?o:[o]).map(Be)}),Z=N(()=>T.value.length>2),b=N(()=>e.placement===void 0?e.vertical?"right":"top":e.placement),fe=N(()=>{const{marks:o}=e;return o?Object.keys(o).map(parseFloat):null}),k=$(-1),ye=$(-1),Q=$(-1),K=$(!1),ne=$(!1),X=N(()=>{const{vertical:o,reverse:a}=e;return o?a?"top":"bottom":a?"right":"left"}),se=N(()=>{if(Z.value)return;const o=T.value,a=_e(e.range?Math.min(...o):e.min),u=_e(e.range?Math.max(...o):o[0]),{value:p}=X;return e.vertical?{[p]:`${a}%`,height:`${u-a}%`}:{[p]:`${a}%`,width:`${u-a}%`}}),J=N(()=>{const o=[],{marks:a}=e;if(a){const u=T.value.slice();u.sort((A,V)=>A-V);const{value:p}=X,{value:S}=Z,{range:F}=e,te=S?()=>!1:A=>F?A>=u[0]&&A<=u[u.length-1]:A<=u[0];for(const A of Object.keys(a)){const V=Number(A);o.push({active:te(V),label:a[A],style:{[p]:`${_e(V)}%`}})}}return o});function ee(o,a){const u=_e(o),{value:p}=X;return{[p]:`${u}%`,zIndex:a===k.value?1:0}}function be(o){return e.showTooltip||Q.value===o||k.value===o&&K.value}function xe(o){return K.value?!(k.value===o&&ye.value===o):!0}function m(o){var a;~o&&(k.value=o,(a=d.value.get(o))===null||a===void 0||a.focus())}function P(){h.value.forEach((o,a)=>{be(a)&&o.syncPosition()})}function x(o){const{"onUpdate:value":a,onUpdateValue:u}=e,{nTriggerFormInput:p,nTriggerFormChange:S}=E;u&&ut(u,o),a&&ut(a,o),c.value=o,p(),S()}function C(o){const{range:a}=e;if(a){if(Array.isArray(o)){const{value:u}=T;o.join()!==u.join()&&x(o)}}else Array.isArray(o)||T.value[0]!==o&&x(o)}function ve(o,a){if(e.range){const u=T.value.slice();u.splice(a,1,o),C(u)}else C(o)}function re(o,a,u){const p=u!==void 0;u||(u=o-a>0?1:-1);const S=fe.value||[],{step:F}=e;if(F==="mark"){const V=pe(o,S.concat(a),p?u:void 0);return V?V.value:a}if(F<=0)return a;const{value:te}=g;let A;if(p){const V=Number((a/F).toFixed(te)),de=Math.floor(V),qe=V>de?de:de-1,Ge=V<de?de:de+1;A=pe(a,[Number((qe*F).toFixed(te)),Number((Ge*F).toFixed(te)),...S],u)}else{const V=Le(o);A=pe(o,[...S,V])}return A?Be(A.value):a}function Be(o){return Math.min(e.max,Math.max(e.min,o))}function _e(o){const{max:a,min:u}=e;return(o-u)/(a-u)*100}function Te(o){const{max:a,min:u}=e;return u+(a-u)*o}function Le(o){const{step:a,min:u}=e;if(a<=0||a==="mark")return o;const p=Math.round((o-u)/a)*a+u;return Number(p.toFixed(g.value))}function pe(o,a=fe.value,u){if(!(a!=null&&a.length))return null;let p=null,S=-1;for(;++S<a.length;){const F=a[S]-o,te=Math.abs(F);(u===void 0||F*u>0)&&(p===null||te<p.distance)&&(p={index:S,distance:te,value:a[S]})}return p}function Y(o){const a=i.value;if(!a)return;const u=ft(o)?o.touches[0]:o,p=a.getBoundingClientRect();let S;return e.vertical?S=(p.bottom-u.clientY)/p.height:S=(u.clientX-p.left)/p.width,e.reverse&&(S=1-S),Te(S)}function Ee(o){if(L.value||!e.keyboard)return;const{vertical:a,reverse:u}=e;switch(o.key){case"ArrowUp":o.preventDefault(),oe(a&&u?-1:1);break;case"ArrowRight":o.preventDefault(),oe(!a&&u?-1:1);break;case"ArrowDown":o.preventDefault(),oe(a&&u?1:-1);break;case"ArrowLeft":o.preventDefault(),oe(!a&&u?1:-1);break}}function oe(o){const a=k.value;if(a===-1)return;const{step:u}=e,p=T.value[a],S=u<=0||u==="mark"?p:p+u*o;ve(re(S,p,o>0?1:-1),a)}function Rt(o){var a,u;if(L.value||!ft(o)&&o.button!==zn)return;const p=Y(o);if(p===void 0)return;const S=T.value.slice(),F=e.range?(u=(a=pe(p,S))===null||a===void 0?void 0:a.index)!==null&&u!==void 0?u:-1:0;F!==-1&&(o.preventDefault(),m(F),zt(),ve(re(p,T.value[F]),F))}function zt(){K.value||(K.value=!0,He("touchend",document,Ie),He("mouseup",document,Ie),He("touchmove",document,Ve),He("mousemove",document,Ve))}function Ae(){K.value&&(K.value=!1,Ke("touchend",document,Ie),Ke("mouseup",document,Ie),Ke("touchmove",document,Ve),Ke("mousemove",document,Ve))}function Ve(o){const{value:a}=k;if(!K.value||a===-1){Ae();return}const u=Y(o);ve(re(u,T.value[a]),a)}function Ie(){Ae()}function Ft(o){k.value=o,L.value||(Q.value=o)}function Bt(o){k.value===o&&(k.value=-1,Ae()),Q.value===o&&(Q.value=-1)}function Tt(o){Q.value=o}function Lt(o){Q.value===o&&(Q.value=-1)}lt(k,(o,a)=>void We(()=>ye.value=a)),lt(y,()=>{if(e.marks){if(ne.value)return;ne.value=!0,We(()=>{ne.value=!1})}We(P)}),St(()=>{Ae()});const ot=N(()=>{const{self:{railColor:o,railColorHover:a,fillColor:u,fillColorHover:p,handleColor:S,opacityDisabled:F,dotColor:te,dotColorModal:A,handleBoxShadow:V,handleBoxShadowHover:de,handleBoxShadowActive:qe,handleBoxShadowFocus:Ge,dotBorder:At,dotBoxShadow:Vt,railHeight:It,railWidthVertical:Nt,handleSize:Ht,dotHeight:Kt,dotWidth:Ut,dotBorderRadius:jt,fontSize:Ot,dotBorderActive:Xt,dotColorPopover:Yt},common:{cubicBezierEaseInOut:qt}}=r.value;return{"--n-bezier":qt,"--n-dot-border":At,"--n-dot-border-active":Xt,"--n-dot-border-radius":jt,"--n-dot-box-shadow":Vt,"--n-dot-color":te,"--n-dot-color-modal":A,"--n-dot-color-popover":Yt,"--n-dot-height":Kt,"--n-dot-width":Ut,"--n-fill-color":u,"--n-fill-color-hover":p,"--n-font-size":Ot,"--n-handle-box-shadow":V,"--n-handle-box-shadow-active":qe,"--n-handle-box-shadow-focus":Ge,"--n-handle-box-shadow-hover":de,"--n-handle-color":S,"--n-handle-size":Ht,"--n-opacity-disabled":F,"--n-rail-color":o,"--n-rail-color-hover":a,"--n-rail-height":It,"--n-rail-width-vertical":Nt}}),ke=s?dt("slider",void 0,ot,e):void 0,it=N(()=>{const{self:{fontSize:o,indicatorColor:a,indicatorBoxShadow:u,indicatorTextColor:p,indicatorBorderRadius:S}}=r.value;return{"--n-font-size":o,"--n-indicator-border-radius":S,"--n-indicator-box-shadow":u,"--n-indicator-color":a,"--n-indicator-text-color":p}}),Se=s?dt("slider-indicator",void 0,it,e):void 0;return{mergedClsPrefix:t,namespace:n,uncontrolledValue:c,mergedValue:y,mergedDisabled:L,mergedPlacement:b,isMounted:sn(),adjustedTo:Qe(e),dotTransitionDisabled:ne,markInfos:J,isShowTooltip:be,shouldKeepTooltipTransition:xe,handleRailRef:i,setHandleRefs:l,setFollowerRefs:w,fillStyle:se,getHandleStyle:ee,activeIndex:k,arrifiedValues:T,followerEnabledIndexSet:z,handleRailMouseDown:Rt,handleHandleFocus:Ft,handleHandleBlur:Bt,handleHandleMouseEnter:Tt,handleHandleMouseLeave:Lt,handleRailKeyDown:Ee,indicatorCssVars:s?void 0:it,indicatorThemeClass:Se==null?void 0:Se.themeClass,indicatorOnRender:Se==null?void 0:Se.onRender,cssVars:s?void 0:ot,themeClass:ke==null?void 0:ke.themeClass,onRender:ke==null?void 0:ke.onRender}},render(){var e;const{mergedClsPrefix:t,themeClass:n,formatTooltip:s}=this;return(e=this.onRender)===null||e===void 0||e.call(this),I("div",{class:[`${t}-slider`,n,{[`${t}-slider--disabled`]:this.mergedDisabled,[`${t}-slider--active`]:this.activeIndex!==-1,[`${t}-slider--with-mark`]:this.marks,[`${t}-slider--vertical`]:this.vertical,[`${t}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},I("div",{class:`${t}-slider-rail`},I("div",{class:`${t}-slider-rail__fill`,style:this.fillStyle}),this.marks?I("div",{class:[`${t}-slider-dots`,this.dotTransitionDisabled&&`${t}-slider-dots--transition-disabled`]},this.markInfos.map(r=>I("div",{key:r.label,class:[`${t}-slider-dot`,{[`${t}-slider-dot--active`]:r.active}],style:r.style}))):null,I("div",{ref:"handleRailRef",class:`${t}-slider-handles`},this.arrifiedValues.map((r,i)=>{const d=this.isShowTooltip(i);return I(Sn,null,{default:()=>[I(Cn,null,{default:()=>I("div",{ref:this.setHandleRefs(i),class:`${t}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,style:this.getHandleStyle(r,i),onFocus:()=>this.handleHandleFocus(i),onBlur:()=>this.handleHandleBlur(i),onMouseenter:()=>this.handleHandleMouseEnter(i),onMouseleave:()=>this.handleHandleMouseLeave(i)},rn(this.$slots.thumb,()=>[I("div",{class:`${t}-slider-handle`})]))}),this.tooltip&&I(Mn,{ref:this.setFollowerRefs(i),show:d,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(i),teleportDisabled:this.adjustedTo===Qe.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>I(on,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(i),onEnter:()=>{this.followerEnabledIndexSet.add(i)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(i)}},{default:()=>{var l;return d?((l=this.indicatorOnRender)===null||l===void 0||l.call(this),I("div",{class:[`${t}-slider-handle-indicator`,this.indicatorThemeClass,`${t}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof s=="function"?s(r):r)):null}})})]})})),this.marks?I("div",{class:`${t}-slider-marks`},this.markInfos.map(r=>I("div",{key:r.label,class:`${t}-slider-mark`,style:r.style},r.label))):null))}}),Tn={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ln=ce("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"44",d:"M358.62 129.28L86.49 402.08L70 442l39.92-16.49l272.8-272.13l-24.1-24.1z"},null,-1),An=ce("path",{d:"M413.07 74.84l-11.79 11.78l24.1 24.1l11.79-11.79a16.51 16.51 0 0 0 0-23.34l-.75-.75a16.51 16.51 0 0 0-23.35 0z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"44"},null,-1),Vn=[Ln,An],pt=we({name:"Pencil",render:function(t,n){return ue(),ge("svg",Tn,Vn)}}),In={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Nn=ce("path",{d:"M336 96a80 80 0 1 0-96 78.39v283.17a32.09 32.09 0 0 0 2.49 12.38l10.07 24a3.92 3.92 0 0 0 6.88 0l10.07-24a32.09 32.09 0 0 0 2.49-12.38V174.39A80.13 80.13 0 0 0 336 96zm-56 0a24 24 0 1 1 24-24a24 24 0 0 1-24 24z",fill:"currentColor"},null,-1),Hn=[Nn],Kn=we({name:"Pin",render:function(t,n){return ue(),ge("svg",In,Hn)}}),Un={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},jn=ce("circle",{cx:"256",cy:"96",r:"64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),On=ce("path",{d:"M272 164a9 9 0 0 0-9-9h-14a9 9 0 0 0-9 9v293.56a32.09 32.09 0 0 0 2.49 12.38l10.07 24a3.92 3.92 0 0 0 6.88 0l10.07-24a32.09 32.09 0 0 0 2.49-12.38z",fill:"currentColor"},null,-1),Xn=ce("circle",{cx:"280",cy:"72",r:"24",fill:"currentColor"},null,-1),Yn=[jn,On,Xn],qn=we({name:"PinOutline",render:function(t,n){return ue(),ge("svg",Un,Yn)}}),Gn=we({__name:"index",props:{storageKey:null,initial:null},setup(e){var d;const t=e,n=$(null),s=(d=t.initial)!=null?d:{x:0,y:0},r=t.storageKey?rt(t.storageKey,s):$(s),{style:i}=an(n,{initialValue:r});return(l,h)=>(ue(),ge("div",{ref_key:"el",ref:n,class:"fixed",style:ze(v(i))},[ln(l.$slots,"default")],4))}});function gt(e,t,n,s=r=>r){return e*s(.5-t*(.5-n))}function Wn(e){return[-e[0],-e[1]]}function W(e,t){return[e[0]+t[0],e[1]+t[1]]}function j(e,t){return[e[0]-t[0],e[1]-t[1]]}function G(e,t){return[e[0]*t,e[1]*t]}function Zn(e,t){return[e[0]/t,e[1]/t]}function De(e){return[e[1],-e[0]]}function Qn(e,t){return e[0]*t[0]+e[1]*t[1]}function Jn(e,t){return e[0]===t[0]&&e[1]===t[1]}function es(e){return Math.hypot(e[0],e[1])}function ts(e){return e[0]*e[0]+e[1]*e[1]}function mt(e,t){return ts(j(e,t))}function Ct(e){return Zn(e,es(e))}function ns(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function $e(e,t,n){let s=Math.sin(n),r=Math.cos(n),i=e[0]-t[0],d=e[1]-t[1],l=i*r-d*s,h=i*s+d*r;return[l+t[0],h+t[1]]}function Je(e,t,n){return W(e,G(j(t,e),n))}function wt(e,t,n){return W(e,G(t,n))}var{min:Ce,PI:ss}=Math,yt=.275,Re=ss+1e-4;function rs(e,t={}){let{size:n=16,smoothing:s=.5,thinning:r=.5,simulatePressure:i=!0,easing:d=m=>m,start:l={},end:h={},last:w=!1}=t,{cap:z=!0,easing:E=m=>m*(2-m)}=l,{cap:L=!0,easing:g=m=>--m*m*m+1}=h;if(e.length===0||n<=0)return[];let c=e[e.length-1].runningLength,_=l.taper===!1?0:l.taper===!0?Math.max(n,c):l.taper,y=h.taper===!1?0:h.taper===!0?Math.max(n,c):h.taper,T=Math.pow(n*s,2),Z=[],b=[],fe=e.slice(0,10).reduce((m,P)=>{let x=P.pressure;if(i){let C=Ce(1,P.distance/n),ve=Ce(1,1-C);x=Ce(1,m+(ve-m)*(C*yt))}return(m+x)/2},e[0].pressure),k=gt(n,r,e[e.length-1].pressure,d),ye,Q=e[0].vector,K=e[0].point,ne=K,X=K,se=ne;for(let m=0;m<e.length;m++){let{pressure:P}=e[m],{point:x,vector:C,distance:ve,runningLength:re}=e[m];if(m<e.length-1&&c-re<3)continue;if(r){if(i){let Y=Ce(1,ve/n),Ee=Ce(1,1-Y);P=Ce(1,fe+(Ee-fe)*(Y*yt))}k=gt(n,r,P,d)}else k=n/2;ye===void 0&&(ye=k);let Be=re<_?E(re/_):1,_e=c-re<y?g((c-re)/y):1;if(k=Math.max(.01,k*Math.min(Be,_e)),m===e.length-1){let Y=G(De(C),k);Z.push(j(x,Y)),b.push(W(x,Y));continue}let Te=e[m+1].vector,Le=Qn(C,Te);if(Le<0){let Y=G(De(Q),k);for(let Ee=1/13,oe=0;oe<=1;oe+=Ee)X=$e(j(x,Y),x,Re*oe),Z.push(X),se=$e(W(x,Y),x,Re*-oe),b.push(se);K=X,ne=se;continue}let pe=G(De(Je(Te,C,Le)),k);X=j(x,pe),(m<=1||mt(K,X)>T)&&(Z.push(X),K=X),se=W(x,pe),(m<=1||mt(ne,se)>T)&&(b.push(se),ne=se),fe=P,Q=C}let J=e[0].point.slice(0,2),ee=e.length>1?e[e.length-1].point.slice(0,2):W(e[0].point,[1,1]),be=[],xe=[];if(e.length===1){if(!(_||y)||w){let m=wt(J,Ct(De(j(J,ee))),-(ye||k)),P=[];for(let x=1/13,C=x;C<=1;C+=x)P.push($e(m,J,Re*2*C));return P}}else{if(!(_||y&&e.length===1))if(z)for(let P=1/13,x=P;x<=1;x+=P){let C=$e(b[0],J,Re*x);be.push(C)}else{let P=j(Z[0],b[0]),x=G(P,.5),C=G(P,.51);be.push(j(J,x),j(J,C),W(J,C),W(J,x))}let m=De(Wn(e[e.length-1].vector));if(y||_&&e.length===1)xe.push(ee);else if(L){let P=wt(ee,m,k);for(let x=1/29,C=x;C<1;C+=x)xe.push($e(P,ee,Re*3*C))}else xe.push(W(ee,G(m,k)),W(ee,G(m,k*.99)),j(ee,G(m,k*.99)),j(ee,G(m,k)))}return Z.concat(xe,b.reverse(),be)}function os(e,t={}){var n;let{streamline:s=.5,size:r=16,last:i=!1}=t;if(e.length===0)return[];let d=.15+(1-s)*.85,l=Array.isArray(e[0])?e:e.map(({x:g,y:c,pressure:_=.5})=>[g,c,_]);if(l.length===2){let g=l[1];l=l.slice(0,-1);for(let c=1;c<5;c++)l.push(Je(l[0],g,c/4))}l.length===1&&(l=[...l,[...W(l[0],[1,1]),...l[0].slice(2)]]);let h=[{point:[l[0][0],l[0][1]],pressure:l[0][2]>=0?l[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],w=!1,z=0,E=h[0],L=l.length-1;for(let g=1;g<l.length;g++){let c=i&&g===L?l[g].slice(0,2):Je(E.point,l[g],d);if(Jn(E.point,c))continue;let _=ns(c,E.point);if(z+=_,g<L&&!w){if(z<r)continue;w=!0}E={point:c,pressure:l[g][2]>=0?l[g][2]:.5,vector:Ct(j(E.point,c)),distance:_,runningLength:z},h.push(E)}return h[0].vector=((n=h[1])==null?void 0:n.vector)||[0,0],h}function is(e,t={}){return rs(os(e,t),t)}var as=()=>({events:{},emit(e,...t){let n=this.events[e]||[];for(let s=0,r=n.length;s<r;s++)n[s](...t)},on(e,t){var n;return(n=this.events[e])!=null&&n.push(t)||(this.events[e]=[t]),()=>{var s;this.events[e]=(s=this.events[e])==null?void 0:s.filter(r=>t!==r)}}});function Oe(e,t){return e-t}function ls(e){return e<0?-1:1}function Xe(e){return[Math.abs(e),ls(e)]}function Mt(){const e=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${e()+e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}var ds=2,ae=ds,Me=class{constructor(e){this.drauu=e,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(e){}onUnselected(){}onStart(e){}onMove(e){return!1}onEnd(e){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(e){var r;var t;const n=this.drauu.el,s=(r=this.drauu.options.coordinateScale)!=null?r:1;if(this.drauu.options.coordinateTransform===!1){const i=this.drauu.el.getBoundingClientRect();return{x:(e.pageX-i.left)*s,y:(e.pageY-i.top)*s,pressure:e.pressure}}else{const i=this.drauu.svgPoint;i.x=e.clientX,i.y=e.clientY;const d=i.matrixTransform((t=n.getScreenCTM())==null?void 0:t.inverse());return{x:d.x*s,y:d.y*s,pressure:e.pressure}}}createElement(e,t){var r;const n=document.createElementNS("http://www.w3.org/2000/svg",e),s=t?{...this.brush,...t}:this.brush;return n.setAttribute("fill",(r=s.fill)!=null?r:"transparent"),n.setAttribute("stroke",s.color),n.setAttribute("stroke-width",s.size.toString()),n.setAttribute("stroke-linecap","round"),s.dasharray&&n.setAttribute("stroke-dasharray",s.dasharray),n}attr(e,t){this.el.setAttribute(e,typeof t=="string"?t:t.toFixed(ae))}_setEvent(e){this.event=e,this.point=this.getMousePosition(e)}_eventDown(e){return this._setEvent(e),this.start=this.point,this.onStart(this.point)}_eventMove(e){return this._setEvent(e),this.onMove(this.point)}_eventUp(e){return this._setEvent(e),this.onEnd(this.point)}},us=class extends Me{constructor(){super(...arguments),this.points=[]}onStart(e){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[e],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&this.points.push(e),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!!e}getSvgData(e){const t=is(e,{size:this.brush.size*2,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5},...this.brush.stylusOptions});if(!t.length)return"";const n=t.reduce((s,[r,i],d,l)=>{const[h,w]=l[(d+1)%l.length];return s.push(r,i,(r+h)/2,(i+w)/2),s},["M",...t[0],"Q"]);return n.push("Z"),n.map(s=>typeof s=="number"?s.toFixed(2):s).join(" ")}},cs=class extends Me{onStart(e){return this.el=this.createElement("ellipse"),this.attr("cx",e.x),this.attr("cy",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,n]=Xe(e.x-this.start.x),[s,r]=Xe(e.y-this.start.y);if(this.shiftPressed){const i=Math.min(t,s);t=i,s=i}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",t),this.attr("ry",s);else{const[i,d]=[this.start.x,this.start.x+t*n].sort(Oe),[l,h]=[this.start.y,this.start.y+s*r].sort(Oe);this.attr("cx",(i+d)/2),this.attr("cy",(l+h)/2),this.attr("rx",(d-i)/2),this.attr("ry",(h-l)/2)}return!0}onEnd(){const e=this.el;return this.el=null,!(!e||!e.getTotalLength())}};function Et(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("fill",t),s.setAttribute("id",e),s.setAttribute("viewBox","0 -5 10 10"),s.setAttribute("refX","5"),s.setAttribute("refY","0"),s.setAttribute("markerWidth","4"),s.setAttribute("markerHeight","4"),s.setAttribute("orient","auto"),r.setAttribute("d","M0,-5L10,0L0,5"),s.appendChild(r),n.appendChild(s),n}var hs=class extends Me{onStart(e){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",e.x),this.attr("y1",e.y),this.attr("x2",e.x),this.attr("y2",e.y),this.brush.arrowEnd){const t=Mt(),n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.append(Et(t,this.brush.color)),n.append(this.el),this.attr("marker-end",`url(#${t})`),n}return this.el}onMove(e){if(!this.el)return!1;let{x:t,y:n}=e;if(this.shiftPressed){const s=e.x-this.start.x,r=e.y-this.start.y;if(r!==0){let i=s/r;i=Math.round(i),Math.abs(i)<=1?(t=this.start.x+r*i,n=this.start.y+r):(t=this.start.x+s,n=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-t),this.attr("y1",this.start.y*2-n),this.attr("x2",t),this.attr("y2",n)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",t),this.attr("y2",n)),!0}onEnd(){const e=this.el;return this.el=null,!(!e||e.getTotalLength()<5)}},fs=class extends Me{onStart(e){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",e.x),this.attr("y",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,n]=Xe(e.x-this.start.x),[s,r]=Xe(e.y-this.start.y);if(this.shiftPressed){const i=Math.min(t,s);t=i,s=i}if(this.altPressed)this.attr("x",this.start.x-t),this.attr("y",this.start.y-s),this.attr("width",t*2),this.attr("height",s*2);else{const[i,d]=[this.start.x,this.start.x+t*n].sort(Oe),[l,h]=[this.start.y,this.start.y+s*r].sort(Oe);this.attr("x",i),this.attr("y",l),this.attr("width",d-i),this.attr("height",h-l)}return!0}onEnd(){const e=this.el;return this.el=null,!(!e||!e.getTotalLength())}};function vs(e,t){const n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function ps(e,t,n){let s=t.x,r=t.y,i=n.x-s,d=n.y-r;if(i!==0||d!==0){const l=((e.x-s)*i+(e.y-r)*d)/(i*i+d*d);l>1?(s=n.x,r=n.y):l>0&&(s+=i*l,r+=d*l)}return i=e.x-s,d=e.y-r,i*i+d*d}function gs(e,t){let n=e[0];const s=[n];let r;for(let i=1,d=e.length;i<d;i++)r=e[i],vs(r,n)>t&&(s.push(r),n=r);return n!==r&&r&&s.push(r),s}function et(e,t,n,s,r){let i=s,d=0;for(let l=t+1;l<n;l++){const h=ps(e[l],e[t],e[n]);h>i&&(d=l,i=h)}i>s&&(d-t>1&&et(e,t,d,s,r),r.push(e[d]),n-d>1&&et(e,d,n,s,r))}function ms(e,t){const n=e.length-1,s=[e[0]];return et(e,0,n,t,s),s.push(e[n]),s}function bt(e,t,n=!1){if(e.length<=2)return e;const s=t!==void 0?t*t:1;return e=n?e:gs(e,s),e=ms(e,s),e}var ws=class extends Me{constructor(){super(...arguments),this.points=[],this.count=0}onStart(e){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[e],this.brush.arrowEnd){this.arrowId=Mt();const t=Et(this.arrowId,this.brush.color);this.el.appendChild(t)}return this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&(this.points.push(e),this.count+=1),this.count>5&&(this.points=bt(this.points,1,!0),this.count=0),this.attr("d",_t(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!(!e||(e.setAttribute("d",_t(bt(this.points,1,!0))),!e.getTotalLength()))}};function ys(e,t){const n=t.x-e.x,s=t.y-e.y;return{length:Math.sqrt(Math.pow(n,2)+Math.pow(s,2)),angle:Math.atan2(s,n)}}function xt(e,t,n,s){const r=t||e,i=n||e,d=.2,l=ys(r,i),h=l.angle+(s?Math.PI:0),w=l.length*d,z=e.x+Math.cos(h)*w,E=e.y+Math.sin(h)*w;return{x:z,y:E}}function bs(e,t,n){const s=xt(n[t-1],n[t-2],e),r=xt(e,n[t-1],n[t+1],!0);return`C ${s.x.toFixed(ae)},${s.y.toFixed(ae)} ${r.x.toFixed(ae)},${r.y.toFixed(ae)} ${e.x.toFixed(ae)},${e.y.toFixed(ae)}`}function _t(e){return e.reduce((t,n,s,r)=>s===0?`M ${n.x.toFixed(ae)},${n.y.toFixed(ae)}`:`${t} ${bs(n,s,r)}`,"")}var xs=class extends Me{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[]}onSelected(e){const t=(n,s)=>{if(n&&n.length)for(let r=0;r<n.length;r++){const i=n[r];if(i.getTotalLength){const d=i.getTotalLength();for(let l=0;l<this.pathSubFactor;l++){const h=i.getPointAtLength(d*l/this.pathSubFactor),w=i.getPointAtLength(d*(l+1)/this.pathSubFactor);this.pathFragments.push({x1:h.x,x2:w.x,y1:h.y,y2:w.y,segment:l,element:s||i})}}else i.children&&t(i.children,i)}};e&&t(e.children)}onUnselected(){this.pathFragments=[]}onStart(e){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=e.x,this.svgPointPrevious.y=e.y}onMove(e){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=e.x,this.svgPointCurrent.y=e.y;const t=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,t}onEnd(){return this.svgPointPrevious=void 0,this.svgPointCurrent=void 0,!0}checkAndEraseElement(){const e=[];if(this.pathFragments.length)for(let t=0;t<this.pathFragments.length;t++){const n=this.pathFragments[t],s={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(n,s)&&(n.element.remove(),e.push(t))}return e.length&&(this.pathFragments=this.pathFragments.filter((t,n)=>!e.includes(n))),e.length>0}lineLineIntersect(e,t){const n=e.x1,s=e.x2,r=t.x1,i=t.x2,d=e.y1,l=e.y2,h=t.y1,w=t.y2,z=(n-s)*(h-w)-(d-l)*(r-i),E=(n*l-d*s)*(r-i)-(n-s)*(r*w-h*i),L=(n*l-d*s)*(h-w)-(d-l)*(r*w-h*i),g=(c,_,y)=>c>=_&&c<=y?!0:c>=y&&c<=_;if(z===0)return!1;{const c={x:E/z,y:L/z};return g(c.x,n,s)&&g(c.y,d,l)&&g(c.x,r,i)&&g(c.y,h,w)}}};function _s(e){return{draw:new ws(e),stylus:new us(e),line:new hs(e),rectangle:new fs(e),ellipse:new cs(e),eraseLine:new xs(e)}}var ks=class{constructor(e={}){this.options=e,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=as(),this._models=_s(this),this._undoStack=[],this._disposables=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),e.el&&this.mount(e.el,e.eventTarget)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(e){this._models[this.mode].onUnselected(),this.options.brush.mode=e,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(e){this.options.brush=e}resolveSelector(e){return typeof e=="string"?document.querySelector(e):e||null}mount(e,t){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(e),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const n=this.resolveSelector(t)||this.el,s=this.eventStart.bind(this),r=this.eventMove.bind(this),i=this.eventEnd.bind(this),d=this.eventKeyboard.bind(this);n.addEventListener("pointerdown",s,{passive:!1}),window.addEventListener("pointermove",r,{passive:!1}),window.addEventListener("pointerup",i,{passive:!1}),window.addEventListener("pointercancel",i,{passive:!1}),window.addEventListener("keydown",d,!1),window.addEventListener("keyup",d,!1),this._disposables.push(()=>{n.removeEventListener("pointerdown",s),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i),window.removeEventListener("keydown",d,!1),window.removeEventListener("keyup",d,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(e=>e()),this._disposables.length=0,this.el=null,this._emitter.emit("unmounted")}on(e,t){return this._emitter.on(e,t)}undo(){const e=this.el;return e.lastElementChild?(this._undoStack.push(e.lastElementChild.cloneNode(!0)),e.lastElementChild.remove(),this._emitter.emit("changed"),!0):!1}redo(){return this._undoStack.length?(this.el.appendChild(this._undoStack.pop()),this._emitter.emit("changed"),!0):!1}canRedo(){return!!this._undoStack.length}canUndo(){var e;return!!((e=this.el)!=null&&e.lastElementChild)}eventMove(e){!this.acceptsInput(e)||!this.drawing||this.model._eventMove(e)&&(e.stopPropagation(),e.preventDefault(),this._emitter.emit("changed"))}eventStart(e){!this.acceptsInput(e)||(e.stopPropagation(),e.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._emitter.emit("start"),this._currentNode=this.model._eventDown(e),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(e){if(!this.acceptsInput(e)||!this.drawing)return;const t=this.model._eventUp(e);t?(t instanceof Element&&t!==this._currentNode&&(this._currentNode=t),this.commit()):this.cancel(),this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed")}acceptsInput(e){return!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(e.pointerType)}eventKeyboard(e){this.shiftPressed===e.shiftKey&&this.altPressed===e.altKey||(this.shiftPressed=e.shiftKey,this.altPressed=e.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(){this._undoStack.length=0;const e=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",e)}clear(){this._undoStack.length=0,this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(e){this.clear(),this.el.innerHTML=e}};function Ss(e){return new ks(e)}const Cs=dn("drauu",{state:()=>({drauuDump:{},drawingMode:{},brush:{}}),persist:{enabled:!0,strategies:[{storage:localStorage,paths:["drauuDump","drawingMode","brush"]}]},getters:{getDrauuDump(e){return e.drauuDump},getDdrawingMode(e){return e.drawingMode},getBrush(e){return e.brush}},actions:{setDrauuDumpOne(e,t){const n=this.drauuDump;n[e]=t,this.drauuDump=n},setDdrawingMode(e,t){const n=this.drawingMode;n[e]=t,this.drawingMode=n},setBrush(e,t){const n=this.brush;n[e]=t,this.brush=n}}}),me=Cs(),he=$(1),Ye=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],le=rt("slidev-drawing-enabled",!1),ie=rt("slidev-drawing-pinned",!0),tt=$(!1),nt=$(!1),Fe=$(!1),Pt=$(!1),Ze=$(!1),B=N({get(){var e;return(e=me.getBrush[String(he.value)])!=null?e:{color:Ye[0],size:4,mode:"stylus",dasharray:void 0}},set(e){me.setBrush(String(he.value),e)}});let st=!1;const H=N({get(){var e;return(e=me.getDdrawingMode[String(he.value)])!=null?e:"stylus"},set(e){me.setDdrawingMode(String(he.value),e),e==="arrow"?B.value={...B.value,mode:"line",arrowEnd:!0}:B.value={...B.value,mode:e,arrowEnd:!1}}}),Ms=un({brush:B,acceptsInputTypes:N(()=>le.value?void 0:["pen"]),coordinateTransform:!1}),R=cn(Ss(Ms));function Dt(){R.clear(),me.setDrauuDumpOne(String(he.value),"")}function Es(){var e;nt.value=R.canRedo(),tt.value=R.canUndo(),Fe.value=!!((e=R.el)!=null&&e.children.length)}function Ps(e){he.value=e}function Ds(e){st=!0;const t=me.getDrauuDump[String(e||he.value)];t?R.load(t):R.clear(),st=!1,le.value=!0}R.on("changed",()=>{if(!Ze.value){const e=yn(()=>{Es(),Ze.value=!1,bn(e)});Ze.value=!0}if(!st){const e=R.dump(),t=String(he.value);me.setDrauuDumpOne(t,e)}});R.on("start",()=>Pt.value=!0);R.on("end",()=>Pt.value=!1);window.addEventListener("keydown",e=>{if(!le.value)return;const t=!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey;let n=!0;e.code==="KeyZ"&&(e.ctrlKey||e.metaKey||e.shiftKey)?e.shiftKey?R.redo():R.undo():e.code==="Escape"?le.value=!1:e.code==="KeyL"&&t?H.value="line":e.code==="KeyA"&&t?H.value="arrow":e.code==="KeyS"&&t?H.value="stylus":e.code==="KeyD"&&t?H.value="draw":e.code==="KeyR"&&t?H.value="rectangle":e.code==="KeyE"&&t?H.value="ellipse":e.code==="KeyC"&&t?Dt():e.code.startsWith("Digit")&&t&&+e.code[5]<=Ye.length?B.value={...B.value,color:Ye[+e.code[5]-1]}:n=!1,n&&(e.preventDefault(),e.stopPropagation())},!1);const $s=O(" \u89E6\u7B14(S) "),Rs=O(" \u7ED8\u753B(D) "),zs=O(" \u76F4\u7EBF(L) "),Fs=O(" \u76F4\u7EBF\u7BAD\u5934(A) "),Bs=O(" \u5706\u5F62(E) "),Ts=O(" \u6B63\u65B9\u5F62(R) "),Ls=O(" \u2505 "),As=O(" \u22EF "),Vs=O(" \u64A4\u9500(ctrl+Z) "),Is=O(" \u590D\u4F4D(shift+Z) "),Ns=O(" \u6E05\u9664(C) "),Hs=O(" \u4E0B\u8F7D "),Ks=we({name:"drawing-drauu-did"}),$t=we({...Ks,props:{did:null},setup(e){const t=e,n=_n(),s=hn("provide-screen"),r=N(()=>n.getPage),i=$();fn(()=>{Ps(Number(t.did)),R.mount(i.value),Ds(),w(H.value)}),St(()=>{R.unmount()});function d(){R.undo()}function l(){R.redo()}function h(){R.el.setAttribute("xmlns","http://www.w3.org/2000/svg");const g=R.el.outerHTML||"",c=new Blob([g],{type:"image/svg+xml"}),_=window.document.createElement("a");_.href=window.URL.createObjectURL(c),_.download="drauu"+Number(t.did)+".svg",document.body.appendChild(_),_.click(),document.body.removeChild(_)}function w(g){H.value=g,le.value=!0,L(void 0)}function z(g){B.value={...B.value,color:g},le.value=!0}function E(g){B.value={...B.value,size:g},le.value=!0}function L(g){B.value={...B.value,dasharray:g},le.value=!0}return(g,c)=>{const _=pn,y=gn,T=Bn,Z=En;return ue(),ge(ct,null,[M(y,{type:"success",dashed:"",onClick:c[0]||(c[0]=b=>ie.value=!v(ie))},{default:D(()=>[Ue(M(_,{size:"18",component:v(pt),class:"transform -rotate-45"},null,8,["component"]),[[je,v(ie)]]),Ue(M(_,{size:"18",component:v(pt)},null,8,["component"]),[[je,!v(ie)]])]),_:1}),ce("div",{style:ze("background-image: url("+v(xn)("cafe.png")+")")},[(ue(),ge("svg",{ref_key:"svg",ref:i,class:"w-full",style:ze(v(r)==="inner:true"?"height: calc(100vh - 181px);":(v(r)==="init","height: calc(100vh - 295px);"))},null,4)),M(Gn,{style:ze(v(s)!=="s"&&v(s)!=="xs"?"width: calc(100vw - 400px)":"width: calc(100vw - 0px)"),flex:"","flex-wrap":"","text-xl":"","p-2":"","gap-1":"","rounded-md":"","bg-main":"",shadow:"","transition-opacity":"","duration-200":"",class:q(v(ie)?"opacity-90":"opacity-0 pointer-events-none"),"storage-key":"slidev-drawing-pos",initial:{x:280,y:105}},{default:D(()=>[M(Z,null,{default:D(()=>[M(y,{type:"success",dashed:"",class:q({"opacity-60":v(H)!=="stylus"}),onClick:c[1]||(c[1]=b=>w("stylus"))},{default:D(()=>[$s]),_:1},8,["class"]),M(y,{type:"success",dashed:"",class:q({"opacity-60":v(H)!=="draw"}),onClick:c[2]||(c[2]=b=>w("draw"))},{default:D(()=>[Rs]),_:1},8,["class"]),M(y,{type:"success",dashed:"",class:q({"opacity-60":v(H)!=="line"}),onClick:c[3]||(c[3]=b=>w("line"))},{default:D(()=>[zs]),_:1},8,["class"]),M(y,{type:"success",dashed:"",class:q({"opacity-60":v(H)!=="arrow"}),onClick:c[4]||(c[4]=b=>w("arrow"))},{default:D(()=>[Fs]),_:1},8,["class"]),M(y,{type:"success",dashed:"",class:q({"opacity-60":v(H)!=="ellipse"}),onClick:c[5]||(c[5]=b=>w("ellipse"))},{default:D(()=>[Bs]),_:1},8,["class"]),M(y,{type:"success",dashed:"",class:q({"opacity-60":v(H)!=="rectangle"}),onClick:c[6]||(c[6]=b=>w("rectangle"))},{default:D(()=>[Ts]),_:1},8,["class"]),M(y,{type:"success",dashed:"",class:q({"opacity-60":v(B).dasharray!=="4"}),onClick:c[7]||(c[7]=b=>L("4"))},{default:D(()=>[Ls]),_:1},8,["class"]),M(y,{type:"success",dashed:"",class:q({"opacity-60":v(B).dasharray!=="1 7"}),onClick:c[8]||(c[8]=b=>L("1 7"))},{default:D(()=>[As]),_:1},8,["class"]),M(y,{"w-100":"",class:q({"opacity-90":!0})},{default:D(()=>[M(T,{"w-100":"","default-value":4,step:.5,max:10,min:0,"onUpdate:value":E},null,8,["step"])]),_:1}),(ue(!0),ge(ct,null,vn(v(Ye),b=>(ue(),mn(y,{key:b,dashed:"",type:v(B).color!==b?"default":"success",onClick:fe=>z(b)},{default:D(()=>[ce("div",{class:q(["w-6 h-6 transition-all transform border border-gray-400/50",v(B).color!==b?"rounded-1/2 scale-85":"rounded-md"]),style:ze(v(le)?{background:b}:{borderColor:b})},null,6)]),_:2},1032,["type","onClick"]))),128)),M(y,{type:v(tt)?"success":"default",dashed:"",disabled:!v(tt),onClick:c[9]||(c[9]=b=>d())},{default:D(()=>[Vs]),_:1},8,["type","disabled"]),M(y,{type:v(nt)?"success":"default",dashed:"",disabled:!v(nt),onClick:c[10]||(c[10]=b=>l())},{default:D(()=>[Is]),_:1},8,["type","disabled"]),M(y,{type:v(Fe)?"success":"default",dashed:"",disabled:!v(Fe),onClick:c[11]||(c[11]=b=>v(Dt)())},{default:D(()=>[Ns]),_:1},8,["type","disabled"]),M(y,{type:v(Fe)?"success":"default",dashed:"",disabled:!v(Fe),onClick:c[12]||(c[12]=b=>h())},{default:D(()=>[Hs]),_:1},8,["type","disabled"]),M(y,{dashed:"",onClick:c[13]||(c[13]=b=>ie.value=!v(ie))},{default:D(()=>[Ue(M(_,{size:"18",component:v(Kn)},null,8,["component"]),[[je,v(ie)]]),Ue(M(_,{size:"18",component:v(qn),class:"transform -rotate-45"},null,8,["component"]),[[je,!v(ie)]])]),_:1})]),_:1})]),_:1},8,["style","class"])],4)],64)}}});typeof ht=="function"&&ht($t);const er=wn($t,[["__scopeId","data-v-e2302c4e"]]);export{er as default};
