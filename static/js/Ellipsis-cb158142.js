import{aN as O,am as S,aB as $,m as j,R as B,n as T,d as D,q as E,p as R,r as u,c as x,t as p,as as I}from"./main-a0935eb4.js";import{_ as M}from"./Tooltip-52529ac9.js";const N=O({name:"Ellipsis",common:S,peers:{Tooltip:$}}),P=N,H=j("ellipsis",{overflow:"hidden"},[B("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),T("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),T("cursor-pointer",`
 cursor: pointer;
 `)]);function k(i){return`${i}-ellipsis--line-clamp`}function w(i,s){return`${i}-ellipsis--cursor-${s}`}const q=Object.assign(Object.assign({},R.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),F=D({name:"Ellipsis",inheritAttrs:!1,props:q,setup(i,{slots:s,attrs:a}){const{mergedClsPrefixRef:l}=E(i),r=R("Ellipsis","-ellipsis",H,P,i,l),f=u(null),m=u(null),g=u(null),c=u(!1),v=x(()=>{const{lineClamp:e}=i,{value:n}=c;return e!==void 0?{textOverflow:"","-webkit-line-clamp":n?"":e}:{textOverflow:n?"":"ellipsis","-webkit-line-clamp":""}});function h(){let e=!1;const{value:n}=c;if(n)return!0;const{value:t}=f;if(t){const{lineClamp:o}=i;if(_(t),o!==void 0)e=t.scrollHeight<=t.offsetHeight;else{const{value:b}=m;b&&(e=b.getBoundingClientRect().width<=t.getBoundingClientRect().width)}L(t,e)}return e}const C=x(()=>i.expandTrigger==="click"?()=>{var e;const{value:n}=c;n&&((e=g.value)===null||e===void 0||e.setShow(!1)),c.value=!n}:void 0),y=()=>p("span",Object.assign({},I(a,{class:[`${l.value}-ellipsis`,i.lineClamp!==void 0?k(l.value):void 0,i.expandTrigger==="click"?w(l.value,"pointer"):void 0],style:v.value}),{ref:"triggerRef",onClick:C.value,onMouseenter:i.expandTrigger==="click"?h:void 0}),i.lineClamp?s:p("span",{ref:"triggerInnerRef"},s));function _(e){if(!e)return;const n=v.value,t=k(l.value);i.lineClamp!==void 0?d(e,t,"add"):d(e,t,"remove");for(const o in n)e.style[o]!==n[o]&&(e.style[o]=n[o])}function L(e,n){const t=w(l.value,"pointer");i.expandTrigger==="click"&&!n?d(e,t,"add"):d(e,t,"remove")}function d(e,n,t){t==="add"?e.classList.contains(n)||e.classList.add(n):e.classList.contains(n)&&e.classList.remove(n)}return{mergedTheme:r,triggerRef:f,triggerInnerRef:m,tooltipRef:g,handleClick:C,renderTrigger:y,getTooltipDisabled:h}},render(){var i;const{tooltip:s,renderTrigger:a,$slots:l}=this;if(s){const{mergedTheme:r}=this;return p(M,Object.assign({ref:"tooltipRef",placement:"top"},s,{getDisabled:this.getTooltipDisabled,theme:r.peers.Tooltip,themeOverrides:r.peerOverrides.Tooltip}),{trigger:a,default:(i=l.tooltip)!==null&&i!==void 0?i:l.default})}else return a()}});export{F as _};
