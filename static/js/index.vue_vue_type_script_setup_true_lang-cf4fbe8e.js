import{d as E,l as B,a as L,b as N,s as x,r as i,w as u,z as j,A as F,B as P,C as U,D as W,E as D,F as G,G as J,g as r,H as $,o as q,k as Q,h as X,I as Y,J as Z,N as ee}from"./main-54bc6f8b.js";import{u as te}from"./tags-e9953177.js";import{_ as ne}from"./Menu-0eb960fb.js";const ce=E({__name:"index",props:{collapsedIconSize:{default:24},collapsedWidth:{default:48},iconSize:{default:20},indent:{default:32},rootIndent:{default:32}},setup(I){const s=I,{t:S}=B(),a=te(),z=L(),K=N(),{locale:T,collapsed:p}=x(K),{theme:v,menuTheme:c}=x(z),m=i({}),h=i(0);u(p,(e,t)=>{if(p.value){const n=s.collapsedIconSize<c.value.minHeight?c.value.minHeight:s.collapsedIconSize+c.value.compensate;m.value={itemHeight:n+"px"},h.value=s.collapsedIconSize}else m.value={itemHeight:c.value.minHeight+"px"},h.value=c.value.minHeight},{immediate:!0,deep:!0});const O=j.map(e=>{var n;return((n=e==null?void 0:e.meta)==null?void 0:n.layout)===!1?e:F([e])[0]}),w=P(O),H=U(w),f=i([]);u(T,(e,t)=>{f.value=W(H,S)},{immediate:!0,deep:!0});const y=i(v!==null);u(v,(e,t)=>{y.value=e!==null},{immediate:!0,deep:!0});const o=D();if(a.hasEmpty){const e=o.matched[o.matched.length-1];e.path.indexOf(":")!==-1&&(e.params=o.params),a.addTag(e)}const g=o.matched,_=i(o.name),M=(g&&g.length?g.map(e=>e.name):[]).filter(e=>e),d=G({openKeys:M}),R=J(()=>r(_));$(()=>{const e=o.matched[o.matched.length-1];e.path.indexOf(":")!==-1&&(e.params=o.params),a.addTag(e),console.log("onMounted",a.getTags.length,a.getActiveTag)}),u(()=>o.fullPath,()=>{var l;const e=o.matched;d.openKeys=e.map(k=>k.name);const t=((l=o.meta)==null?void 0:l.activeMenu)||"";_.value=t||o.name;const n=e[e.length-1];n.path.indexOf(":")!==-1&&(n.params=o.params),a.addTag(n),console.log("fullPath",a.getTags.length,a.getActiveTag)});function A(e,t){/http(s)?:/.test(e)&&window.open(e)}function C(e){if(!e)return;const t=e.find(l=>d.openKeys.indexOf(l)===-1),n=V(t);d.openKeys=n?t?[t]:[]:e}function V(e){if(!e)return!1;const t=[];for(const{children:n,key:l}of r(f))n&&n.length&&t.push(l);return t.includes(e)}function b(e){return Y(ee,Z(e.menuRenderIcon))}return(e,t)=>{const n=ne;return q(),Q("div",null,[X(n,{"theme-overrides":m.value,accordion:"",options:f.value,inverted:y.value,mode:"vertical",collapsed:r(p),"collapsed-width":s.collapsedWidth,"collapsed-icon-size":h.value,"icon-size":s.iconSize,indent:s.indent,"root-indent":s.rootIndent,"expanded-keys":d.openKeys,value:r(R),"render-icon":b,"onUpdate:value":A,"onUpdate:expandedKeys":C},null,8,["theme-overrides","options","inverted","collapsed","collapsed-width","collapsed-icon-size","icon-size","indent","root-indent","expanded-keys","value"])])}}});export{ce as _};
